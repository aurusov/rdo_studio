<HTML>
<HEAD>
<TITLE>Описание событий</TITLE>
<LINK rel = "stylesheet" type = "text/css" href = "../../../../shared/styles/styles.css">
<SCRIPT type="text/javascript" src="../../../../shared/scripts/toggle_display.js"></SCRIPT>
</HEAD>
	<BODY>
		<DIV>
			<H1>ОПИСАНИЕ СОБЫТИЙ</H1>
		<P><B>События</B> описываются в отдельном <A href="../../rdo_terms.htm">объекте</A> с расширением <B>.evn</B>
		<PRE class="syntax">$Pattern <A class="syntax" href="#event_name">&lt;имя_события&gt;</A> : event [ <A class="syntax" href="#sign_of_the_trace">&lt;признак_трассировки&gt;</A> ]
[ $Parameters <A class="syntax" href="#param_descr">&lt;описание_параметров_события&gt;</A> ]
$Relevant_resources <A class="syntax" href="#rel_res_desc">&lt;описание_релевантных_ресурсов_события&gt;</A>
$Body <A class="syntax" href="#body">&lt;тело_события&gt;</A>
$End</PRE>
		<DL class="syntax">
			<DT class="syntax"><A name="event_name"></A><I>имя_события</I></DT>
			<DD class="syntax">Имя события представляет собой <A href="../../rdo_lex_div/rdo_lex_div_names.htm">простое имя</A>. Имена должны быть различными для всех событий и не должны совпадать с ранее определенными именами.</DD>
			<DT class="syntax"><A name ="sign_of_the_trace"><I>признак_трассировки</I></DT>
			<DD class="syntax">Событие может иметь признак трассировки (подробнее смотри описание <A class="syntax" href="../../rdo_res/rdo_res_trace_descr.htm">&lt;трассировка состояния объектов РДО&gt;</A>).
			<DT class="syntax"><A name="param_descr"></A><I>описание_параметров_события</I></DT>
			<DD class="syntax">Описание параметров события имеет следующий формат:
				<PRE class="syntax"><A class="syntax" href="#param_name">&lt;имя_параметра&gt;</A> : <A class="syntax" href="#param_type">&lt;тип_параметра&gt;</A> [ = <A class="syntax" href="#param_def_val">&lt;значение_по_умолчанию&gt;</A> ]
{ &lt;имя_параметра&gt; : &lt;тип_параметра&gt; [ = &lt;значение_по_умолчанию&gt; ] }</PRE>
				<DL class="syntax">
					<DT class="syntax"><A name="param_name"></A><I>имя_параметра</I></DT>
					<DD class="syntax">Имя параметра события представляет собой <A href="../../rdo_lex_div/rdo_lex_div_names.htm">простое имя</A>. Область видимости имени параметра события - это данное событие. Поэтому имена всех параметров одного события должны быть различными.</DD>
					<DT class="syntax"><A name="param_type"></A><I>тип_параметра</I></DT>
					<DD class="syntax">Тип параметра - это один из возможных <A href="../../rdo_base/rdo_base_types.htm">типов данных</A>. При описании типов параметров события возможны ссылки на <A href="../../rdo_base/rdo_base_res_types.htm#param_type">типы параметров ресурсов</A> и <A href="../rdo_obj_const_fun_sec.htm#const_type">типы символьных констант</A>.</DD>
					<DT class="syntax"><A name="param_def_val"></A><I>значение_по_умолчанию</I></DT>
					<DD class="syntax">Для параметра любого типа может быть задано значение по умолчанию. Это значение указывают после знака равенства целой или вещественной <A href="../../rdo_lex_div/rdo_lex_div_numeric_const.htm">численной константой</A>, либо именем значения для перечислимого параметра. При указании типа ссылкой также возможно задание значения по умолчанию. При этом задаваемое значение может отличаться от значения по умолчанию того параметра, на тип которого производится ссылка.</DD>
				</DL>
				<P>Параметры в событии могут отсутствовать, в этом случае зарезервированное слово <FONT class="syntax">$Parameters</FONT> не указывают.</P>
			</DD>
			<DT class="syntax"><A name="rel_res_desc"></A><I>описание_релевантных_ресурсов_события</I></DT>
			<DD class="syntax">Описание релевантных ресурсов события имеет следующий формат:
				<PRE class="syntax"><A class="syntax" href="#rel_res_name">&lt;имя_релевантного_ресурса&gt;</A> : <A class="syntax" href="#rel_res_describer">&lt;описатель&gt;</A> <A class="syntax" href="#event_conv_stat">&lt;статус_конвертора&gt;</A></PRE>
				<DL class="syntax">
					<DT class="syntax"><A name="rel_res_name"></A><I>имя_релевантного_ресурса</I></DT>
					<DD class="syntax">Имя релевантного ресурса образца представляет собой <A href="../../rdo_lex_div/rdo_lex_div_names.htm">простое имя</A>. Область видимости имени релевантного ресурса события - это данное событие. Поэтому имена всех релевантных ресурсов одного события должны быть различными.</DD>
					<DT class="syntax"><A name="rel_res_describer"></A><I>описатель</I></DT>
					<DD class="syntax">Описатель ресурса - это либо имя <A href="../../rdo_base/rdo_base_res_types.htm">типа ресурса</A>, либо имя <A href="../../rdo_base/rdo_base_resources.htm">ресурса</A>. В первом случае в качестве релевантного может быть использован любой ресурс указанного типа, состояние которого удовлетворяет <A href="#init_cond">предусловию</A>. Во втором случае может быть использован только указанный ресурс, если его состояние удовлетворяет предусловию.</DD>
					<DT class="syntax"><A name="event_conv_stat"></A><I>статус_конвертора</I></DT>
					<DD class="syntax">Статус конвертора описывает, что происходит с релевантным ресурсом в целом при наступлении события.
					<P><A name="event_conv_stats"></A><A name="event_conv_stats_nc"></A>В данной версии языка для событий определены следующие статусы конверторов:</P>
					<TABLE class="visible" cols="2">
						<TR valign="top">
							<TH align="left" width="20%">Статус конвертора</TH>
							<TH align="left" width="80%">Описание</TH>
						</TR>
						<TR valign="top">
							<TD class="visible" NOWRAP width="20%"><FONT class="syntax">Keep</FONT></TD>
							<TD class="visible" width="80%">Релевантный ресурс сохраняется, но его состояние (значения параметров) изменяется</TD>
						</TR>
						<TR valign="top">
							<TD class="visible" NOWRAP width="20%"><FONT class="syntax">Create</FONT></TD>
							<TD class="visible" width="80%">Релевантный ресурс создается</TD>
						</TR>
						<TR valign="top">
							<TD class="visible" NOWRAP width="20%"><FONT class="syntax">Erase</FONT></TD>
							<TD class="visible" width="80%">Релевантный ресурс уничтожается</TD>
						</TR>
					</TABLE>
					<P>Статусы конверторов <FONT class="syntax">Keep</FONT> и <FONT class="syntax">Erase</FONT> требуют в качестве описателя исключительно имя <A href="../../rdo_base/rdo_base_resources.htm">ресурса</A>, а статус <FONT class="syntax">Create</FONT> - имя <A href="../../rdo_base/rdo_base_res_types.htm">типа ресурса</A>.</P>
					</DD>
				</DL>
			</DD>
		<DT class="syntax"><A name="body"></A><I>тело_образца</I></DT>
		<DD class="syntax">Тело событий и образцов имеет следующий формат:
			<PRE class="syntax"><A class="syntax" href="#body_rel_res_name">&lt;имя_релевантного_ресурса&gt;</A> Convert_event <A class="syntax" href="#statement_list">&lt;список_инструкций&gt;</A></PRE>
				<DL class="syntax">
					<DT class="syntax"><A name="body_rel_res_name"></A><I>имя_релевантного_ресурса</I></DT>
					<DD class="syntax">Имена релевантных ресурсов должны следовать в том порядке, в котором они указаны в описании <A href="#rel_res_desc">релевантных ресурсов</A>.</DD>
						<DT class="syntax"><A name="statement_list"></A><I>список_инструкций</I></DT>
						<DD class="syntax">Список инструкций и указанное перед ним зарезервированное слово должны присутствовать в образце в том случае, если соответствующий <A href="#rel_res_desc">статус конвертора</A>, указанный при описании релевантных ресурсов, есть <FONT class="syntax">Keep</FONT> или <FONT class="syntax">Create</FONT>. Если статус конвертора есть <FONT class="syntax">Erase</FONT>, то список инструкций может быть пустым или наоборот содержать инструкции, которые требуется выполнить для сбора статистики в момент удаления ресурса. <A name="temp_trace_feat"></A>Если статус конвертора есть <FONT class="syntax">Create</FONT>, то после зарезервированного слова может быть указан <A href="../../rdo_res/rdo_res_trace_descr.htm">признак трассировки</A> 
						для создаваемого ресурса.
						<P>Список инструкций записывают в следующем формате:</P>
							<PRE class="syntax"><A class="syntax" href="#statement">&lt;инструкция&gt;</A> { &lt;инструкция&gt; }</PRE>
							<DL class="syntax">
								<DT class="syntax"><A name="statement"></A><A name="statement_nc"></A><I>инструкция</I></DT>
								<DD class="syntax">Инструкция имеет формат:
									<PRE class="syntax"><A class="syntax" href="#statement_assignment">&lt;инструкция_присваивания&gt;</A>
| <A class="syntax" href="#statement_planning">&lt;инструкция_планирования_события&gt;</A>
| <A class="syntax" href="#statement_stop">&lt;инструкция_остановки_события&gt;</A>
| <A class="syntax" href="#statement_process_start">&lt;инструкция_инициации_процесса&gt;</A>
| <A class="syntax" href="#statement_nochange">&lt;пустая_инструкция&gt;</A>
| <A class="syntax" href="#statement_if">&lt;условная_инструкция&gt;</A>
| { <A class="syntax" href="#statement_list">&lt;список_инструкций&gt;</A> }</PRE>
									<DL class="syntax">
										<DT class="syntax"><A name="statement_assignment"></A><I>инструкция_присваивания</I></DT>
										<DD class="syntax">Инструкция присваивания имеет формат:
											<PRE class="syntax">&lt;имя_параметра&gt; <A class="syntax" href="#assignment_operator">&lt;оператор_присваивания&gt;</A> <A class="syntax" href="#arith_expr">&lt;арифметическое_выражение&gt;</A>;</PRE>
											<DL class="syntax">
												<DT class="syntax"><A name="assignment_operator"></A><I>оператор_присваивания</I></DT>
												<DD class="syntax">В данной версии языка возможны следующих операторы присваивания:
													<TABLE class="visible" cols="2" style="width: 80%">
														<TR valign="top">
															<TH align="left" width="20%">Оператор присваивания</TH>
															<TH align="left" width="80%">Описание</TH>
														</TR>
														<TR valign="top">
															<TD class="visible" NOWRAP width="20%"><FONT class="syntax">=</FONT></TD>
															<TD class="visible" width="80%">Присваивает параметру слева значение арифметического выражения справа</TD>
														</TR>
														<TR valign="top">
															<TD class="visible" NOWRAP width="20%"><FONT class="syntax">+=</FONT></TD>
															<TD class="visible" width="80%">Увеличивает параметр слева на значение арифметического выражения справа</TD>
														</TR>
														<TR valign="top">
															<TD class="visible" NOWRAP width="20%"><FONT class="syntax">-=</FONT></TD>
															<TD class="visible" width="80%">Уменьшает параметр слева на значение арифметического выражения справа</TD>
														</TR>
														<TR valign="top">
															<TD class="visible" NOWRAP width="20%"><FONT class="syntax">*=</FONT></TD>
															<TD class="visible" width="80%">Умножает параметр слева на значение арифметического выражения справа</TD>
														</TR>
														<TR valign="top">
															<TD class="visible" NOWRAP width="20%"><FONT class="syntax">/=</FONT></TD>
															<TD class="visible" width="80%">Делит параметр слева на значение арифметического выражения справа</TD>
														</TR>
													</TABLE>
												</DD>
												<DT class="syntax"><A name="arith_expr"></A><I>арифметическое_выражение</I></DT>
												<DD class="syntax"><A href="../../rdo_base/rdo_base_equations.htm">Арифметическое выражение</A> должно иметь тот же тип, что и параметр, которому присваивается значение. Для вещественного параметра выражение может иметь целый тип.</DD>
											</DL>
										</DD>
										<DT class="syntax"><A name="statement_planning"></A><I>инструкция_планирования_события</I></DT>
										<DD class="syntax">Инструкция планирования события имеет формат:
											<PRE class="syntax"><A class="syntax" href="#planning_event_name">&lt;имя_события&gt;</A>.planning( <A class="syntax" href="#event_time">&lt;время_планирования_события&gt;</A> [, <A class="syntax" href="#param_descr">&lt;знчение_параметров_события&gt;</A> ] );</PRE>
											<DL class="syntax">
												<DT class="syntax"><A name="planning_event_name"></A><I>имя_события</I></DT>
												<DD class="syntax">Имя события - это имя одного из описанных в модели <A class="syntax" href="rdo_pat_type_event.htm">событий</A>.</DD>
												<DT class="syntax"><A name="event_time"></A><I>время_планирования_события</I></DT>
												<DD class="syntax">Время планирования события представляет собой <A href="../../rdo_base/rdo_base_equations.htm">арифметическое выражение</A>, равное времени, в которое данное событие выполнится.</DD>
												<DT class="syntax"><A name="param_descr"><I>значение параметров события</I></A></DT>
												<DD class="syntax">Значения параметров события записываются таким же образом, как и для <A href="../rdo_obj_dpt.htm#dpt_act_params">активностей</A>, за исключением того, что они могут представлять собой <A href="../../rdo_base/rdo_base_equations.htm">арифметическое выражение</A>.</DD>
											</DL>
										</DD>
										<DT class="syntax"><A name="statement_stop"></A><I>инструкция_остановки_события</I></DT>
										<DD class="syntax">Инструкция остановки события имеет формат:
											<PRE class="syntax"><A class="syntax" href="#stop_event_name">&lt;имя_события&gt;</A>.stop();</PRE>
											<DL class="syntax">
												<DT class="syntax"><A name="stop_event_name"></A><I>имя_события</I></DT>
												<DD class="syntax">Имя события - это имя одного из описанных в модели <A class="syntax" href="rdo_pat_type_event.htm">событий</A>.</DD>
											</DL>
										</DD>
										<DT class="syntax"><A name="statement_process_start"></A><I>инструкция_инициации_процесса</I></DT>
										<DD class="syntax">Инструкция инициации процесса активизирует процесс обслуживания, передавая транзакт в его первый блок, имеет следующий формат:
											<PRE class="syntax"><A class="syntax" href="#proc_name">&lt;имя_процесса&gt;</A>.processStart( <A class="syntax" href="#transact">&lt;транзакт&gt;</A> );</PRE>
											<DL class="syntax">
												<DT class="syntax"><A name="proc_name"></A><I>имя_процесса</I></DT>
												<DD class="syntax">Имя события - это имя одного из описанных в модели <A class="syntax" href="../rdo_obj_proc.htm">процессов</A>.</DD>
												<DT class="syntax"><A name="transact"></A><I>транзакт</I></DT>
												<DD class="syntax">Транзакт - это имя <A class="syntax" href="../rdo_obj_pat.htm#rel_res_desc">релевантного ресурса</A>, который передается в процесс в качестве транзакта.</DD>
											</DL>
										</DD>
										<DT class="syntax"><A name="statement_nochange"></A><I>пустая_инструкция</I></DT>
										<DD class="syntax">Пустая инструкция имеет формат:
											<PRE class="syntax">&lt;имя_параметра&gt; NoChange;</PRE>Зарезервированное слово <FONT class="syntax">NoChange</FONT> указывает, что значение данного параметра не изменяется.
										</DD>
										<DT class="syntax"><A name="statement_if"></A><I>условная_инструкция</I></DT>
										<DD class="syntax">Условная инструкция иммет формат:
											<PRE class="syntax">if ( <A class="syntax" href="#cond_log_expr">&lt;логическое_выражение&gt;</A> ) <A class="syntax" href="#statement">&lt;инструкция&gt;</A> [ else <A class="syntax" href="#statement">&lt;инструкция&gt;</A> ]</PRE>Ветвь <FONT class="syntax">else</FONT> является необязательной. Никаких ограничений на уровень вложенности инструкций в языке нет. Таким образом, внутри условной инструкции также могут быть условные инструкции и т.д.
										</DD>
									</DL>
									<P><A name="set_order"></A>Все инструкции могут быть указаны в произвольном порядке. Вычисление новых значений параметров релевантных ресурсов происходит в том порядке, в котором следуют их инструкции присваивания. Если нет ни одной инструкции присваивания, которая относится к данному параметру, то подразумевается, что значение этого параметра не изменяется. Для ресурсов, имеющих статус конвертора <FONT class="syntax">Create</FONT>, задание новых значений каждого параметра обязательны, за исключением случая, когда для параметра указано значение по-умолчанию в описании типа ресурса.</P>
								</DD>
							</DL>
						</DD>
				</DL>
		</DD>
	</DL>
	<A href="" class="ref" onclick="return toggle_display(v1);"><H4>Примеры</H4></A>
	<DIV style="display:none" id="v1">
	<PRE class="samples">
$Pattern Образец_прихода_клиента : event
$Parameters
  Количество : integer = 10
$Relevant_resources
  Рел_ресурс_1 : Ресурс_1      NoChange    NoChange
  Рел_ресурс_2 : Ресурс_2      NoChange    Keep
  Рел_ресурс_3 : Тип_1         Keep        Keep
$Body
  Рел_ресурс_1
    Образец_прихода_клиента.planning( time_now + Интервал_прихода( 30 ) )(norm(5));
    Количество_в_очереди += Образец_прихода_клиента.Количество
$End
	</PRE>
	</DIV>
		<H4>См. также</H4>
	<P><A href="../../rdo_base/rdo_base_res_types.htm">Типы ресурсов</A></P>
	<P><A href="../../rdo_base/rdo_base_resources.htm">Описание ресурсов</A></P>
	<P><A href="../rdo_obj_const_fun_sec.htm">Описание символьных констант, функций и последовательностей</A></P>
	<P><A href="../rdo_obj_dpt.htm">Описание точек принятия решений</A></P>
	<P><A href="../../rdo_res/rdo_res_trc.htm">Объект трассировки</A></P>
	</DIV>
	<BR><SCRIPT src="../../../../shared/scripts/navbar.js"></SCRIPT>
</BODY>
</HTML>
